language: node_js
node_js:
  - '8'
env:
  global:
    # doubleface GITHUB_TOKEN
    # to generate yours : travis encrypt GITHUB_TOKEN=<your_GITHUB_TOKEN> -r konnectors/cozy-konnector-generali
    - secure: "vA6/ucZDBKlEQo87Q9zHi0h472AT0T7t2x6onwt5lfFgHcNqAPEjRBEqB9Vk7nHX7sdMuDkw5uUmG2ZSi5rdj8icNG5yQct19Tp55fAtyWWm/9igBoQONw6eAnT6MgPTLgD0P2sR55jfUv1wP7DKp/nbOcsE18ZDF6qDzK83o3fA3yyCmXNOLee+iTnIZC65runLvzg9+d/lDrG8FUaD5WHjKrJsztmhNX7rg2oc1Qknp6KAC7rgaswsSofwz7I+UqrQmB9r6PVc0bu8gKSKxgX1Kp7vq6srYOva78Lb4/43r85UwWaCPt3Yc6RAxFLY4lvPn7rqmAB6gXurbxDvzLyexsWMo9Zb71ute1wBkiyPYoWFbJxHJXOFuo3yCi2nMSLwXG/Cl44+nX0fsj/pABny0cfFDTlF5Y+fjTKt7L9a8J7pAFa60CROzhuZdBSKSJoMGZG5Jsi4D9y0xo/R7e9jIoAPqf6oqJY8IkvdpPCUU/AUucwQtsuwJMlbJoNjrNu56BvvOefyD73LGBHSUDzrGzGURfc5E87EgrV7by9tOKq/k16HAi95XYodAxVy8hO4ZDJkRFDFGXb+1eZN4Cw4vX1sN1bWfvNBLQSKrwFheJqRMAsDEonpcUNNDYD0wvecUW8WdqZUsjpNydzNYTbuQLv9GMbAlegNp20Ai20="
cache:
  yarn: true
  directories:
    - node_modules
script:
  - yarn build
  - yarn lint
  - if [ $TRAVIS_SECURE_ENV_VARS = "true" ]; then yarn test; fi
deploy:
  - provider: script
    repo: konnectors/cozy-konnector-generali
    skip-cleanup: true
    script: yarn deploy
    on:
      branch: master
  - provider: script
    repo: konnectors/cozy-konnector-generali
    skip-cleanup: true
    script: yarn deploy:prod
    on:
      branch: prod
